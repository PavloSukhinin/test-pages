"use strict";(self.webpackChunkbinary_studio_academy_2021_stage_2=self.webpackChunkbinary_studio_academy_2021_stage_2||[]).push([[936],{8676:function(e,a,t){t.r(a),t.d(a,{metadata:function(){return E},_frontmatter:function(){return W},default:function(){return Z}});var n=t(3366),s=(t(7294),t(4983)),o=t(5361),c=t(9519),p=(t(6542),t(9093),t(7190)),r=t(5081),l=t(9414),m=t(4936),k=t(562),i=(t(368),t(994)),u=t(42),N=t(1220),d=t(9016),h=(t(621),t(3390),t(2461)),g=t(5338),f=t(4407),y=t(7008),w=t(2058),b=t(201),v=t(4274),x=t(1335),j=t(4959),T=t(5650),q=t(9336),_=t(4967),I=t(3608),P=t(9600),S=t(6421),H=t(5026),L=t(2284),C=t(4423),F=t(3497),A=["components"],E={orderId:6,author:"Uliana Lobanova",title:"Express yourself with Node.js",description:"Alexander will explain what a web server is, how to work with the backend using <strong>Node.js</strong>, show how to configure the necessary tools, and will set up a server capable of processing requests and data using <strong> Express.js </strong>.",keywords:["nodejs","ulianalobanova","lecture-3"],duration:"36 min",publishedAt:"2021-12-20T00:00:00",hiddenFromMainPage:!0},W={},U={metadata:E,_frontmatter:W},R=o.Fq;function Z(e){var a=e.components,t=(0,n.Z)(e,A);return(0,s.kt)(R,Object.assign({},U,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("div",null,(0,s.kt)("h1",null,(0,s.kt)("strong",null,"Express yourself with Node.js"))),(0,s.kt)(o.SQ,{currentLanguage:"en",languages:{ua:"lectures/express-yourself-with-nodejs",en:"lectures/express-yourself-with-nodejs/en"},mdxType:"Language"}),(0,s.kt)("div",null,(0,s.kt)("div",{className:"author"},(0,s.kt)("div",{className:"avatar-wrapper"},(0,s.kt)("object",{className:"avatar-object",data:r.PC,role:"img","aria-label":"Uliana profile picture"})),(0,s.kt)("div",{className:"profile"},(0,s.kt)("h3",{className:"name"},"Uliana Lobanova"),(0,s.kt)("ul",{className:"contacts"},(0,s.kt)("li",null,(0,s.kt)("a",{href:"https://www.linkedin.com/in/uliana-l-b34129105/",rel:"author",className:"linkedin"},(0,s.kt)(c.G,{icon:p.D9H,className:"icon",mdxType:"FontAwesomeIcon"}),(0,s.kt)("span",null,"uliana-l")))),(0,s.kt)("p",{className:"about"},"Full-Stack JavaScript Developer at ",(0,s.kt)("a",{href:"https://binary-studio.com"},(0,s.kt)("strong",null,"Binary Studio")),", movie junkie and cat lover. Enjoys appealing UIs, watching the sea, crime comedies and Le Big Mac ðŸ”«ðŸ’¼"))),(0,s.kt)("div",{className:"bubble",style:{margin:"-0.5em 1em 1em"}},(0,s.kt)("strong",null,"Hello!"),(0,s.kt)("br",null),"Remembering the days when I was a student, I tried not to overload the lecture with unnecessary and complicated information that will not be useful to you in the next couple of months. On the other hand, it is encouraged to understand the details, therefore, I will attach links to additional materials and articles. The lecture is divided into blocks that are as independent of each other as possible, so if, after reading a title, you understand you're already familiar with the content, feel free to move on to the next block.",(0,s.kt)("br",null),"Good luck!")),(0,s.kt)("div",{className:"messages"},"Ryu, being very happy with the online fighting game, started showing off to his friends. At first, the game caused incredible excitement, but before Ryu had a chance to begin negotiations with Capcom, the hype had subsided. Everyone noted that there are too few characters in the game and their characteristics do not correspond to reality, which is why it became boring to play. Frustrated, Ryu again asks the developers to fix the situation:"),(0,s.kt)(o.JI,{senderId:"ryu",senderName:"Ryu",senderAvatarUrl:l.TL,reactions:[{emoji:"ðŸ‘",count:42}],replies:[{name:"N/A",avatarUrl:l.Vw}],mdxType:"SlackMessage"},(0,s.kt)("p",null,"Hi, I need to increase the number of characters in the fighting game. I also want to be able to change the properties of the players, their appearance, damage, vulnerability and names (because among us there are French who are offended when their name is spelled incorrectly)")),(0,s.kt)("p",null,"The student realized that a simple page begins to grow into a serious application with business logic and user management and at the same time they're not able to store large amounts of data on the client. So the student decides that it's time to develop the server!"),(0,s.kt)(o.JI,{senderId:"you",senderName:"You",senderAvatarUrl:l.y7,reactions:[{emoji:"ðŸ‘",count:13},{emoji:"ðŸ",count:8},{emoji:"ðŸš€",count:10},{emoji:"ðŸ‘",count:6}],replies:[{name:"N/A",avatarUrl:l.IT}],mdxType:"SlackMessage"},"Yes, I think we can implement all this using a server."),(0,s.kt)("p",null,"And since the student writes in JS, the choice for the technology becomes obvious - Node.js. There is only one little thing left â€• ",(0,s.kt)("span",{className:"tooltip","data-tooltip":'well, yeah, "little thing"...'},(0,s.kt)("u",null,"to learn this technology")),"."),(0,s.kt)("hr",null),(0,s.kt)("div",{id:"table-of-contents",className:"table-of-contents"},(0,s.kt)("h2",null,(0,s.kt)("strong",null,"Working with Node.js")),(0,s.kt)(o.Nv,{timeline:[{linkTo:"#about-backend",title:"Theory"},{linkTo:"#preparation",title:"Preparation"},{linkTo:"#package-manager",title:"Package manager"},{linkTo:"#basic-node-js",title:"Introduction to Node.js"},{linkTo:"#basic-express-js",title:"Introduction to Express.js"},{linkTo:"#first-project",title:"First project"},{linkTo:"#finish",title:"Conclusion"}],mdxType:"TimelineOfContents"})),(0,s.kt)(o.aC,{id:"about-backend",number:"1",name:"Theory",difficulty:"Like YouTube ads, you can skip it.",objectives:"To understand what a server is and its role in the web.",mdxType:"Level"}),(0,s.kt)(o.U1,{duration:"4.5 min",mdxType:"VideoWrapper"},(0,s.kt)("iframe",{src:"https://www.youtube.com/embed/wyxUw25CG1k?start=31&end=301",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-1-1"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-1-1"},(0,s.kt)("strong",null,"Definitions")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("ul",null,(0,s.kt)("li",null,(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/Client_(computing)"},(0,s.kt)("strong",null,"Client"))," â€• can be a browser or any other software that makes requests through the web."),(0,s.kt)("li",null,(0,s.kt)("div",null,(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/Web_server"},(0,s.kt)("strong",null,"Server"))," â€• a program or a part of it that accepts client requests via HTTP and responds with the content of requested resource or an error message."),(0,s.kt)("div",{className:"bubble small subtle"},'When a web developer says "server", they mean "web server". The same applies to "client", "application", etc.')),(0,s.kt)("li",null,(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol"},(0,s.kt)("strong",null,"HTTP"))," â€• a set of rules for data communication on the Internet."),(0,s.kt)("li",null,(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods"},(0,s.kt)("strong",null,"HTTP-method"))," â€• indicates the desired action to be performed on the identified resource. The main ones include ",(0,s.kt)("strong",null,"GET"),", ",(0,s.kt)("strong",null,"POST"),", ",(0,s.kt)("strong",null,"PUT"),", ",(0,s.kt)("strong",null,"DELETE")," â€• there are some more, but this is the basis that will be enough for a while"),(0,s.kt)("li",null,(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes"},(0,s.kt)("strong",null,"HTTP-status"))," â€• issued by a server in response to a client's request and tells you the status of the requested operation. The most commonly used: ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#200"},(0,s.kt)("strong",null,"200")),", ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#301"},(0,s.kt)("strong",null,"301")),", ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#401"},(0,s.kt)("strong",null,"401")),", ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#404"},(0,s.kt)("strong",null,"404")),", ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#500"},(0,s.kt)("strong",null,"500")),".")))),(0,s.kt)("ol",{className:"inverted"},(0,s.kt)("li",null,(0,s.kt)("h5",null,(0,s.kt)("strong",null,"Web theory")),"Let's take a look at an example of how the Web works:",(0,s.kt)("ol",null,(0,s.kt)("li",null,(0,s.kt)("em",null,"user opened browser")," / ",(0,s.kt)("strong",null,"launched client")),(0,s.kt)("li",null,(0,s.kt)("em",null,"user opened ",(0,s.kt)("a",{href:"https://academy.binary-studio.com/en/"},"the link"))," / ",(0,s.kt)("strong",null,"sent a GET request to the server via HTTP")),(0,s.kt)("li",null,(0,s.kt)("em",null,"server processed the request")," / ",(0,s.kt)("strong",null,"identified that a client requested a file and then found the file")),(0,s.kt)("li",null,(0,s.kt)("div",{className:"details"},(0,s.kt)("label",{className:"summary",htmlFor:"accordion-1-2"},(0,s.kt)("em",null,"server returned the file")," / ",(0,s.kt)("strong",null,"via HTTP responded with the 200 status and an HTML file")),(0,s.kt)("input",{type:"checkbox",id:"accordion-1-2"}),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("img",{src:i.Z,alt:""}))))),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("a",{href:"https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/How_the_Web_works"},'Article "How the Web works"')),(0,s.kt)("div",{className:"bubble small subtle"},"If you write JS code and have already implemented your first HTML-page - it means that you know the client well enough. Here we will concentrate on the server-side ",(0,s.kt)("em",null,(0,s.kt)("s",null,"(actually, we deal with the server because it's the topic of the lecture, but it does not matter)")),".")),(0,s.kt)("li",null,(0,s.kt)("h5",null,(0,s.kt)("strong",null,'Server â€• "what?" and "why?"')),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-1-3"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-1-3"},(0,s.kt)("strong",null,"What")," is server?"),(0,s.kt)("div",{className:"details-body"},"Simply put, when a user types a request in the address bar, the browser requests data from a remote computer (server) via HTTP. In response, it receives a file or data to display in a browser.",(0,s.kt)("img",{src:u.Z,alt:""}))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-1-4"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-1-4"},(0,s.kt)("strong",null,"Why")," do we need a server?"),(0,s.kt)("div",{className:"details-body"},"To save and process all resources used on the web. It doesn't matter if it's one static page or a whole Facebook, everything is located on remote servers or web hosting services, and is displayed to the user only on request.",(0,s.kt)("img",{src:N.Z,alt:""}))),(0,s.kt)("p",null,"The modern web server performs many actions for processing and storing information, works with static files and sensitive data that no one should have access to, performs complicated calculations that are too heavy for the client side, and much more. Therefore, depending on the complexity of the project and the tasks to be solved, for convenient work and efficiency, the server would be built according to a certain architecture: ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/Monolithic_application"},(0,s.kt)("strong",null,"monolithic"))," or ",(0,s.kt)("a",{href:"https://en.wikipedia.org/wiki/Microservices"},(0,s.kt)("strong",null,"microservice")),".")),(0,s.kt)("li",null,(0,s.kt)("h5",null,(0,s.kt)("strong",null,"The history of Node.js")),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("blockquote",null,(0,s.kt)("a",{href:"https://twitter.com/ryanmdahl"},(0,s.kt)("strong",null,"Ryan Dahl")),",Â ",(0,s.kt)("a",{href:"https://www.youtube.com/watch?v=ysSxxIqKNN0"},(0,s.kt)("strong",null,"2009")),(0,s.kt)("br",null),(0,s.kt)("a",{href:"https://nodejs.org/"},(0,s.kt)("strong",null,"Node.js")))),(0,s.kt)("p",null,"It was 2009 when the first version of Node.js was published. After that there have been ",(0,s.kt)("a",{href:"https://blog.risingstack.com/history-of-node-js/"},"some issues with rights"),", but we're less interested in politics than in the fact that Node.js executes JavaScript code outside a web browser:"),(0,s.kt)("div",{className:"columns"},(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"JavaScript â€” client-side language"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#1"))))),(0,s.kt)("div",{className:"panel-body"},"As a result - it has a large community that wants to write code on a server using a familiar language."))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Event Loop"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#2"))))),(0,s.kt)("div",{className:"panel-body"},"JavaScript is a single-threaded language, which means that all operations, both synchronous and asynchronous, occur in a single thread that is never blocked. Non-blocking I/O model makes it lightweight and efficient."))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"V8"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#3"))))),(0,s.kt)("div",{className:"panel-body"},"An engine developed by the Google Chrome team to improve the performance of JavaScript in their browser. It's extremely fast and powerful because it's written in C++. Node.js runs the V8 engine outside the browser and this allows Node to be very performant.")))),(0,s.kt)("p",null,"And now, thanks to all these factors, we can create complete web applications using JavaScript on both the client and server."))),(0,s.kt)(o.aC,{id:"preparation",number:"2",name:"Preparation",difficulty:"Like Windows installation, easy but something can go wrong.",objectives:"Install Node.js",mdxType:"Level"}),(0,s.kt)(o.U1,{duration:"3 min",mdxType:"VideoWrapper"},(0,s.kt)("iframe",{src:"https://www.youtube.com/embed/wyxUw25CG1k?start=301&end=487",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,s.kt)("p",null,"To start the installation process, just go to the official website ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org"},"https://nodejs.org"),", and download the installation file for your operating system, then follow the instructions."),(0,s.kt)("div",{className:"bubble small subtle"},"It would also be a very good idea to use a package called node version manager to manage the installation of different node versions on your system. There is an ",(0,s.kt)("a",{href:"https://github.com/nvm-sh/nvm"},"nvm package for Mac and Linux")," or a separate ",(0,s.kt)("a",{href:"https://github.com/coreybutler/nvm-windows"},"package for Windows"),". Check one of those links and follow the instructions to install nvm on your system and that will give you the ability to install any version of Node.js you need."),"There is no point in writing the full installation process for all operating systems, there are a lot of official tutorials for that, but I want to pay attention to the common installation problems.",(0,s.kt)("div",{className:"columns"},(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Restart your computer after installation"),(0,s.kt)("span",null,"ðŸ–¥ï¸")))),(0,s.kt)("div",{className:"panel-body"},"In most cases environment variables are the ones to blame, so a reboot is required to apply the changes to them. Mostly this is the case for Windows      "))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Insufficient permissions"),(0,s.kt)("span",null,"âš ï¸")))),(0,s.kt)("div",{className:"panel-body"},"Run the installation on admin behalf"))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Invalid environment variables"),(0,s.kt)("span",null,"ðŸš§")))),(0,s.kt)("div",{className:"panel-body"},"The installer should automatically set the path to the Node.js file, but sometimes this does not work, and you need to enter these paths manually. ",(0,s.kt)("a",{href:"https://stackoverflow.com/questions/27864040/fixing-npm-path-in-windows-8-and-10"},"How to do this on Windows?"))))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-2-1"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-2-1"},(0,s.kt)("strong",null,"Use a terminal to verify a successful Node.js installation.")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"Run next commands:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"shell"},(0,s.kt)("pre",{parentName:"div",className:"language-shell"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"# Print Node.js version"),"\nnode -v\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"# Print npm version"),"\n",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," -v"))))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-2-2"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-2-2"},(0,s.kt)("strong",null,"If the version is displayed - everything is installed and working properly.")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"  ",(0,s.kt)("em",{parentName:"p"},"your versions may be newer")),(0,s.kt)("img",{src:d.Z,alt:"nodeNpmVersions"}))),(0,s.kt)("p",null,"Did you notice ",(0,s.kt)("strong",{parentName:"p"},"npm"),"? But did we install it? It's a package manager developed by the Node.js team and installed altogether with Node for easy management of modules. We'll talk about it in more detail in the next block, but now it's important to make sure it works."),(0,s.kt)(o.aC,{id:"package-manager",number:"3",name:"Package managers",difficulty:"Like learning to play cards - you need to understand who is responsible for what.",objectives:"Understand the definitions and start working with packages using npm",mdxType:"Level"}),(0,s.kt)(o.U1,{duration:"5.5 min",mdxType:"VideoWrapper"},(0,s.kt)("iframe",{src:"https://www.youtube.com/embed/wyxUw25CG1k?start=488&end=816",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-3-1"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-3-1"},(0,s.kt)("strong",null,"Definitions")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Modular_programming"},"Modules")," â€” parts of a program / code, divided in separate blocks for further reuse."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Software_suite"},"Packages")," â€” a collection of modules."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Package_manager"},"Package managers")," â€• a tool for installing, uninstalling, updating, versioning and validating packages and modules.")))),(0,s.kt)("br",null),(0,s.kt)("ol",{className:"inverted"},(0,s.kt)("li",null,(0,s.kt)("h5",null,(0,s.kt)("strong",null,'What are "packages" and why do they need "managers"?')),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-3-2"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-3-2"},(0,s.kt)("strong",null,"To explain what a package / module is, let's take a look at an example.")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"1. In your project, you wrote a function to sort an array and reuse it in several places.")),(0,s.kt)("div",{className:"bubble small subtle"},"Congratulations, it's almost a package / module"),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"2. Later, you decided that the same function could help someone else, so you published it on ",(0,s.kt)("a",{parentName:"em",href:"https://stackoverflow.com/questions/1063007/how-to-sort-an-array-of-integers-correctly"},"StackOverflow as a reply"),".")),(0,s.kt)("div",{className:"bubble small subtle"},"Now your package / module is publicly available and other developers can simply copypaste it."),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"3. And what if your solution was longer and took 400 lines of code? 500 lines? 1000?")),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  It is not so convenient to copy such amounts of data manually. ")),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"4. Therefore, it is better to format your function correctly and publish it to a remote storage.")),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  Now other programmers just need to know the name of your package / module and use ",(0,s.kt)("strong",{parentName:"p"},"npm")," to add it to their project, delete it if they don't like it, or upgrade to the next version if you implement it.")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"One more time - what is the difference between ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"packages")," and ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"modules"),"? Believe me, even experienced developers are often confused, but the difference is simple - ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"module")," is an atom, ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"package")," is a molecule. In other words, ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"package")," consists of other ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"modules"),", which are the smallest unit that solves one problem. Pretty simple, isn't it?")))),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://www.javascriptstuff.com/javascript-frontend-package-managers/"},"Several years ago")," the block about package managers could have taken the whole lecture due to their variety, but today the situation has stabilized, and now to work with JS we have 2 leaders:"),(0,s.kt)("div",{className:"columns"},(0,s.kt)("div",{className:"column col-6 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"npm")))),(0,s.kt)("div",{className:"panel-body"},(0,s.kt)("a",{href:"https://www.npmjs.com"},(0,s.kt)("img",{src:m.Z})),"Basic JavaScript development tools that will help you enter the market faster and build powerful applications using modern open-source code."))),(0,s.kt)("div",{className:"column col-6 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"yarn")))),(0,s.kt)("div",{className:"panel-body"},(0,s.kt)("a",{href:"https://yarnpkg.com"},(0,s.kt)("img",{src:k.Z})),"Fast, reliable and secure dependency management.")))),(0,s.kt)("p",null,"All  ",(0,s.kt)("strong",{parentName:"p"},"npm")," packages are available in ",(0,s.kt)("strong",{parentName:"p"},"yarn"),", because they use the same data source. ",(0,s.kt)("strong",{parentName:"p"},"yarn")," was created only to improve the performance of ",(0,s.kt)("strong",{parentName:"p"},"npm"),". There is no actual difference between them, except for the subjective judgment of fans of a particular tool. In the future, you will have to decide on your own what is more convenient for you to work with, but today we will talk about ",(0,s.kt)("strong",{parentName:"p"},"npm"),", because of its relation with Node.js."),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("a",{parentName:"p",href:"https://www.sitepoint.com/yarn-vs-npm/"},'Article "Yarn vs npm: Everything You Need to Know"')))),(0,s.kt)("li",null,(0,s.kt)("h5",null,(0,s.kt)("strong",null,"Working with npm")),(0,s.kt)("p",null,"To find out the full list of commands available for ",(0,s.kt)("strong",{parentName:"p"},"npm"),", you can ",(0,s.kt)("del",{parentName:"p"},"and should")," read ",(0,s.kt)("a",{parentName:"p",href:"https://docs.npmjs.com/cli-documentation/"},"the documentation"),". In the lecture I'll provide most common ones:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"shell"},(0,s.kt)("pre",{parentName:"div",className:"language-shell"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"# project initialization"),"\n",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," init\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"# package installation"),"\n",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"install")," package-name\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"# package installation for development only"),"\n",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"install")," package-name --save-dev\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"# package removal"),"\n",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," uninstall package-name\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"# installation of a specific version of the package"),"\n",(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"install")," package-name@version\n")))),(0,s.kt)("li",null,'In conclusion, I would like to explain why people came up with "package managers", after all, we could add the code manually directly to the project without any problems:',(0,s.kt)("div",{className:"columns"},(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Convenient"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#1"))))),(0,s.kt)("div",{className:"panel-body"},"Instead of copypasting the code, there is a handy tool for this."))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Reduced project size"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#2"))))),(0,s.kt)("div",{className:"panel-body"},"If we stored the code of all dependencies altogether with the project code, it would significantly increase its size, which would complicate the exchange of data within the team during development"))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Resolving conflicts"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#3"))))),(0,s.kt)("div",{className:"panel-body"},"Due to the huge variety of packages, they can conflict with each other. Package managers deal with these problems."))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Optimization"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#4"))))),(0,s.kt)("div",{className:"panel-body"},"Package ",(0,s.kt)("b",null,"Ð¥")," can depend on package ",(0,s.kt)("i",null,(0,s.kt)("b",null,"Ð"))," and package ",(0,s.kt)("b",null,"Y")," can depend on package ",(0,s.kt)("i",null,(0,s.kt)("b",null,"Ð")),". If we add packages ",(0,s.kt)("b",null,"X")," and ",(0,s.kt)("b",null,"Y")," to a project manually, we will have a duplicate of package ",(0,s.kt)("i",null,(0,s.kt)("b",null,"Ð")),". Package managers solve duplicate issues and optimize the number of installed dependencies."))),(0,s.kt)("div",{className:"column col-4 col-xs-12"},(0,s.kt)("div",{className:"panel"},(0,s.kt)("div",{className:"panel-header"},(0,s.kt)("div",{className:"panel-title"},(0,s.kt)("h6",null,(0,s.kt)("strong",null,"Cross-platform"),(0,s.kt)("span",{className:"text-gray"},(0,s.kt)("small",null,"#5"))))),(0,s.kt)("div",{className:"panel-body"},"Different packages or their analogs may be required to work on different platforms, but managers can help and provide recommendations.")))))),(0,s.kt)(o.aC,{id:"basic-node-js",number:"4",name:"Introduction to Node.js",difficulty:"Like baseball rules - understood nothing, but very interesting.",objectives:"Use Node.js packages to start simple HTTP server and deal with eventloop.",mdxType:"Level"}),(0,s.kt)(o.U1,{duration:"3.5 min",mdxType:"VideoWrapper"},(0,s.kt)("iframe",{src:"https://www.youtube.com/embed/wyxUw25CG1k?start=817&end=1024",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Node.js")," - is a ",(0,s.kt)("strong",{parentName:"p"},"JavaScript")," runtime, where we can run scripts. Everything will work ",(0,s.kt)("span",{className:"tooltip","data-tooltip":'"almost" because they only have V8 in common'},(0,s.kt)("u",null,"almost like in a browser")),", so the transition from frontend to backend should be ",(0,s.kt)("span",{className:"tooltip","data-tooltip":"compared to learning a new language"},(0,s.kt)("u",null,"as comfortable as possible")),"."),(0,s.kt)("p",null,"To go to the environment you need to run the command ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"node")," in the terminal, then run any JS code. But obviously, this method is not the most convenient one and it is better to write code in files, that can then be run with the command ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"node file_name.js"),".  "),(0,s.kt)("p",null,"Experiment time! We already know how to use all of JS 's power with Node and that's awesome, but now we want to start implementing servers. Let's open ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org/api/"},"an official documentation"),", to take a look at the list of built-in ",(0,s.kt)("strong",{parentName:"p"},"Node.js")," packages, and find out how to work with them. As we can see, there are too many of them, but we only need one to get started - ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org/api/http.html"},"http"),", that is responsible for working via HTTP. After reading the description we understand that it has many methods and it doesn't make sense for a beginner to consider all of them, instead let's write a practical example of starting an HTTP server: "),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"// import of the http module"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," http ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'http'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," port ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token number"},"3000"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// callback on each HTTP request"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"requestHandler")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"request",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," response"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"request",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"url",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n    response",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"end"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"How you doin\'?"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// create HTTP-server"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," server ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," http",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"createServer"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"requestHandler",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// run the server"),"\nserver",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"listen"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"port",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token template-string"},(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`"),(0,s.kt)("span",{parentName:"span",className:"token string"},"Server running at http://localhost:"),(0,s.kt)("span",{parentName:"span",className:"token interpolation"},(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"port",(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`")),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-4-1"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-4-1"},(0,s.kt)("strong",null,"Run the file")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("img",{src:h.Z,alt:"server_started"}))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-4-2"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-4-2"},(0,s.kt)("strong",null,"Check the server via browser")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"The browser always sends a GET request to the specified URL and in addition requests ",(0,s.kt)("em",{parentName:"p"},"favicon.ico"),", because it perceives any address as a page."),(0,s.kt)("img",{src:g.Z,alt:"get_server"}),(0,s.kt)("p",null,"Server logs that we get from the ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"requestHandler()")," function"),(0,s.kt)("img",{src:f.Z,alt:"get_server_log"}))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-4-3"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-4-3"},(0,s.kt)("strong",null,"Check the server via Postman")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"  Meet ",(0,s.kt)("a",{parentName:"p",href:"https://www.getpostman.com/"},"Postman")," â€• tool for convenient sending of HTTP-requests to a server. Via Postman we can easily change the URL, methods, headers, and body of requests."),(0,s.kt)("img",{src:y.Z,alt:"postman"}),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("a",{parentName:"p",href:"https://learning.postman.com/docs/getting-started/introduction/"},'"Postman Introduction"'))))),(0,s.kt)("p",null,"We created a working server! Hooray! It is very simple and does not understand the difference between GEt and POST requests, does not know how to work with request body and much more, but it is the first one and we â¤ï¸ it just for that, right? Let's teach the server to save all logs to a file, and also try another package ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org/api/fs.html"},"fs"),", designed to work with the file system:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"// import of the http module"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," http ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'http'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// import of fs http module"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," fs ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'fs'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," port ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token number"},"3000"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// create a stream for writing to a file"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," logFile ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," fs",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"createWriteStream"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'log.txt'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," flags",(0,s.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"code",className:"token string"},"'a'")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// callback on each HTTP request"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"requestHandler")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"request",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," response"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"request",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"url",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n    logFile",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"write"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token template-string"},(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`"),(0,s.kt)("span",{parentName:"span",className:"token string"},"Request url: "),(0,s.kt)("span",{parentName:"span",className:"token interpolation"},(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"request",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},"."),"url",(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token string"},"\\n"),(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`")),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n    response",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"end"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"How you doin\'?"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// create HTTP-server"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," server ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," http",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"createServer"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"requestHandler",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// run the server"),"\nserver",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"listen"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"port",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token template-string"},(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`"),(0,s.kt)("span",{parentName:"span",className:"token string"},"Server running at http://localhost:"),(0,s.kt)("span",{parentName:"span",className:"token interpolation"},(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"port",(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`")),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-4-4"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-4-4"},(0,s.kt)("strong",null,"After sending a few requests, let's take a look at the file ",(0,s.kt)("i",null,"log.txt"))),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("img",{src:w.Z,alt:"server_logs"}))),(0,s.kt)("p",null,"And what will happen if the writing to the file is not finished yet, and the server receives another request? Looking ahead, I will say that file system operations are asynchronous streams, and considering the single-threaded JS, they must block the server until completion. But this is not the case, and we can see this by bombarding the server with requests, and it will not cancel or delay any of them."),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("a",{parentName:"p",href:"https://medium.com/edge-coders/node-js-streams-everything-you-need-to-know-c9141306be93"},'Article "Node.js Streams: Everything you need to know"'))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-4-5"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-4-5"},(0,s.kt)("strong",null,"And why is that? Now we should finally understand how the eventloop is implemented in Node")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"The circle in the center is a JS thread and it always performs only one operation at a time. On the left we see a queue of requests waiting to be fulfilled. When a synchronous request is received, it starts to be processed and upon completion starts the next request. In cases where the request causes asynchronous operations, it is delegated to the library ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/libuv/libuv"},"libuv"),", which processes it in a separate thread, and upon completion, puts the callback in the same queue."),(0,s.kt)("img",{src:b.Z,alt:"eventloop"}),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"I tried to explain as simply as possible, but I'm not sure that's enough, so here's a more detailed ",(0,s.kt)("a",{parentName:"p",href:"https://youtu.be/8aGhZQkoFbQ"},"video"),"       ")))),(0,s.kt)("p",null,"Let's return to our code. It looks too cumbersome for the functionality it performs because it works with too ",(0,s.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Low-level_programming_language"},"low-level")," operations. We will talk in the next block about how to move to a higher level of abstraction with Express.js."),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/uliana-lobanova/nodejs-lecture/tree/nodejs-basics"},"Repository with the code from this block"))),(0,s.kt)("br",null),(0,s.kt)(o.aC,{id:"basic-express-js",number:"5",name:"Introduction to Express.js",difficulty:"Like SuperMario level ðŸ„ - you need to lose several times to pass.",objectives:"Install Express.js and start the HTTP server with it.",mdxType:"Level"}),(0,s.kt)(o.U1,{duration:"4 min 45 s",mdxType:"VideoWrapper"},(0,s.kt)("iframe",{src:"https://www.youtube.com/embed/wyxUw25CG1k?start=1024&end=1308",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Express.js")," is a package that provides many features that simplify developing ",(0,s.kt)("strong",{parentName:"p"},"Node.js")," applications. It increases the level of abstraction and we do not need to configure the network connection, parse headers, methods and query body, and more. To get started, let's install ",(0,s.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/express"},"it")," in a project using ",(0,s.kt)("strong",{parentName:"p"},"npm"),"."),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"shell"},(0,s.kt)("pre",{parentName:"div",className:"language-shell"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," i express"))),(0,s.kt)("p",null,"Create a new file and write the code for a basic HTTP server:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* express.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// import of express"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// express-app initialization"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," app ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"express"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// listener for GET-requests to "/" route'),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Hello World'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// listener for PUT-requests to "/test" route'),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"put"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/test'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Hello World PUT'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// run the server"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"listen"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"3000"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-5-1"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-5-1"},(0,s.kt)("strong",null,"Let's run the code and check if it works")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("div",{className:"gatsby-highlight","data-language":"shell"},(0,s.kt)("pre",{parentName:"div",className:"language-shell"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"node express.js"))),(0,s.kt)("img",{src:v.Z,alt:"express_get"}),(0,s.kt)("img",{src:x.Z,alt:"express_post"}))),(0,s.kt)("p",null,"Everything works! If we try to send requests to routes that aren't described in the code (for example ",(0,s.kt)("strong",{parentName:"p"},"GET"),": ",(0,s.kt)("em",{parentName:"p"},"/ users"),"), we will receive a 404 response. In order to write something like this on nodes, we would need about 200 lines of code. Impressive, right? Let's move on."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Express.js")," extends common Node objects ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org/docs/latest-v18.x/api/http.html#class-httpclientrequest"},"request")," and ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org/docs/latest-v18.x/api/http.html#class-httpserverresponse"},"response"),", adding a lot of useful features right out of the box. For example, it parses ",(0,s.kt)("em",{parentName:"p"},"query-parameters")," into an object and can take parts of a URL as parameters. In ",(0,s.kt)("em",{parentName:"p"},"response")," there are convenient methods to format response data:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},"app",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/:param'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"query",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")," ",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// query-params object"),"\n  console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"params",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"value",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")," ",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// value of param, located in the URL at the specified position '/:param'"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"status"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"200"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"json"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," message",(0,s.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"code",className:"token string"},"'Hello World'")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")," ",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// method "status()", sets status code for response, and "json()" configures Content-Type header for JSON format'),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.kt)("p",null,"5 lines, and how many benefits! This is how Express.js conquered the world. Currently, there are a huge number of npm packages for express, designed to solve various cases. Let's consider one of these - parsing the body of the query. Earlier to do this, we would need to add a package (officially recognized Best Practice) ",(0,s.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/body-parser"},"body-parser"),". But since it was widely used,  the methods from it has been re-added under the express methods to provide request body parsing support out-of-the-box. "),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-5-2"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-5-2"},(0,s.kt)("strong",null,"Embed ",(0,s.kt)("b",null,"body-parser"))),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* express.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// import of express"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// express-app initialization"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," app ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"express"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// parse application/x-www-form-urlencoded"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"urlencoded"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," extended",(0,s.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"false")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// parse application/json"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"json"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// listener for GET-requests to "/" route'),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"query",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Hello World'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},'// listener for PUT-requests to "/test" route'),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"put"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/test'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"body",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Hello World PUT'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// run the server"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"listen"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"3000"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"shell"},(0,s.kt)("pre",{parentName:"div",className:"language-shell"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"node express.js"))),(0,s.kt)("p",null,"Send PUT-request with body:"),(0,s.kt)("img",{src:j.Z,alt:"express_body"}),(0,s.kt)("p",null,"Take a look at logs:"),(0,s.kt)("img",{src:T.Z,alt:"express_body_log"}))),(0,s.kt)("p",null,"We explored enough basic ",(0,s.kt)("strong",{parentName:"p"},"express")," functionality to start with, so now we can take a look at how all this code would be scaled in real life."),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/uliana-lobanova/nodejs-lecture/tree/expressjs-basics"},"Repository with the code from this block"))),(0,s.kt)("br",null),(0,s.kt)(o.aC,{id:"first-project",number:"6",name:"Project",difficulty:"Like watching a painting artist - cool to observe.",objectives:"To understand the structure of a typical project on Node.js/Express.js",mdxType:"Level"}),(0,s.kt)(o.U1,{duration:"14 min 20 sec",mdxType:"VideoWrapper"},(0,s.kt)("iframe",{src:"https://www.youtube.com/embed/wyxUw25CG1k?start=1308&end=2165",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,s.kt)("p",null,"And the best part ðŸŽ. Here we will talk about the structure of the project, what, where, and why. For a quick start of a project, we can use ",(0,s.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/express-generator"},"express-generator"),", which is created by the Express team and generates a default starter on ",(0,s.kt)("strong",{parentName:"p"},"Express.js"),". It should be installed globally to be accessible anywhere from any project. To do this, add the ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"-g")," flag to the installation command: "),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"shell"},(0,s.kt)("pre",{parentName:"div",className:"language-shell"},(0,s.kt)("code",{parentName:"pre",className:"language-shell"},(0,s.kt)("span",{parentName:"code",className:"token function"},"npm")," i express-generator -g"))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-1"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-1"},(0,s.kt)("strong",null,"After a successful installation, you can check its functionality by the classic method - find out the version or run help ðŸ™ƒ")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"Version:"),(0,s.kt)("img",{src:q.Z,alt:"express_generator_version"}),(0,s.kt)("p",null,"Help:"),(0,s.kt)("img",{src:_.Z,alt:"express_generator_help"}))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-2"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-2"},(0,s.kt)("strong",null,"Well and now we will generate the project without view templates and with the .gitignore file")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("img",{src:I.Z,alt:"express_generator"}))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-3"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-3"},(0,s.kt)("strong",null,"Let's see what happened")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("img",{src:P.Z,alt:"express_generator_starter"}))),(0,s.kt)("p",null,"Pay attention to the ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"scripts")," field in ",(0,s.kt)("em",{parentName:"p"},"package.json"),", which contains npm scripts for working with the application. In order to start the server, we will need to use the command ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"npm start"),"."),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  Article ",(0,s.kt)("a",{parentName:"p",href:"https://blog.nakulrajput.com/task-automation-with-npm-run/"},'"Task automation with npm run"'))),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-4"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-4"},(0,s.kt)("strong",null,"For the simplest API server, we don't need the ",(0,s.kt)("i",null,"/public")," folder and template rendering initialization, so we'll just delete them.")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"1) delete the folder ",(0,s.kt)("em",{parentName:"p"},"/public")," with all the contents\n2) make changes to ",(0,s.kt)("em",{parentName:"p"},"/routes/index.js")),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* /routes/index.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," router ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"Router"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* GET home page. */"),"\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," router",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("p",null,"3) make changes to ",(0,s.kt)("em",{parentName:"p"},"app.js")),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* app.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," cookieParser ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'cookie-parser'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," logger ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'morgan'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," indexRouter ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'./routes/index'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," usersRouter ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'./routes/users'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," app ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"express"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token function"},"logger"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'dev'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"json"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"urlencoded"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," extended",(0,s.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"false")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token function"},"cookieParser"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," indexRouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\napp",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"use"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/users'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," usersRouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," app",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))))),(0,s.kt)("p",null,"Currently, our project implements only one layer - ",(0,s.kt)("strong",{parentName:"p"},"routes"),", which should be responsible ",(0,s.kt)("strong",{parentName:"p"},"ONLY")," for working with HTTP-requests."),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"Why so radical? ",(0,s.kt)("em",{parentName:"p"},"...should be responsible ",(0,s.kt)("strong",{parentName:"em"},"ONLY")," for working..."),". Proper layering of the application is a guarantee of code that will be easy to maintain due to the convenient development and clear structure. If the layer only works with HTTP requests, then there should be no business logic or data handling, and vice versa.")),(0,s.kt)("p",null,"Let's make our server smart and give it ",(0,s.kt)("span",{className:"tooltip","data-tooltip":"ðŸ•µï¸ 007 ðŸ”«"},(0,s.kt)("u",null,"logic, business logic")),". In the world of Express applications, the layer that is responsible for business logic is called  ",(0,s.kt)("strong",{parentName:"p"},"services"),", and because it is not generated automatically, we will create it manually."),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-5"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-5"},(0,s.kt)("strong",null,"Creating and testing the services layer")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"1) Create a folder ",(0,s.kt)("em",{parentName:"p"},"/services"),(0,s.kt)("br",{parentName:"p"}),"\n","2) Create a file ",(0,s.kt)("em",{parentName:"p"},"/services/user.service.js"),(0,s.kt)("br",{parentName:"p"}),"\n","3) Add a function to the file and export it:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* services/user.service.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"getName")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token parameter"},"user")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," user ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"?")," user",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"name ",(0,s.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"null"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," getName ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("p",null,"4) Import the function from the service to the router, use it to get a user's name."),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* routes/users.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," getName ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'../services/user.service'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," router ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"Router"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Welcome'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* GET users listing. */"),"\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"post"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," result ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"getName"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"body",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"result",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token template-string"},(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`"),(0,s.kt)("span",{parentName:"span",className:"token string"},"Your name is "),(0,s.kt)("span",{parentName:"span",className:"token interpolation"},(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"result",(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`")),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"status"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"400"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"User wasn\'t sent"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," router",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("p",null,"5) Run the server ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"npm start"),(0,s.kt)("br",{parentName:"p"}),"\n","6) Send POST-request to the ",(0,s.kt)("em",{parentName:"p"},"/users")," route and take a look at the response that contains the sent name"),(0,s.kt)("img",{src:S.Z,alt:"service_test"}))),(0,s.kt)("p",null,"Now the server is able to do something, time to think about how we want to store data! There is a ",(0,s.kt)("strong",{parentName:"p"},"repositories")," layer for this, and we are going to implement it."),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-6"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-6"},(0,s.kt)("strong",null,"Creating and testing the repositories layer")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"1) Create folder ",(0,s.kt)("em",{parentName:"p"},"/repositories"),(0,s.kt)("br",{parentName:"p"}),"\n","2) Create file ",(0,s.kt)("em",{parentName:"p"},"/repositories/user.repository.js"),(0,s.kt)("br",{parentName:"p"}),"\n","3) Add a function to the file and export it:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* repositories/user.repository.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"saveData")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token parameter"},"data")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"data",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token comment"},"// code for saving data to the DB"),"\n    console",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"log"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token template-string"},(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`"),(0,s.kt)("span",{parentName:"span",className:"token interpolation"},(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"data",(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token string"}," is saved"),(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`")),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.kt)("span",{parentName:"code",className:"token boolean"},"false"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," saveData ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  We won't deal with a database in this lecture, so our code is just a simulation of working with it. In reality, this layer should contain all the work with data: their retrieval, saving, and updating.")),(0,s.kt)("p",null,"4) Import the function from the repository into the service and add the function ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"saveName ()"),":"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* services/user.service.js */"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," saveData ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"../repositories/user.repository"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"getName")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token parameter"},"user")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," user ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"?")," user",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"name ",(0,s.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"null"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"saveName")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token parameter"},"user")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"user",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," isSaved ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"saveData"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"user",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," isSaved",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"null"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," getName",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," saveName ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("p",null,"5) Import the function from the service into the router and use it to work with the request body:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* routes/users.js */"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," saveName ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'../services/user.service'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," router ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"Router"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"Hello!"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),"\n\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"post"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," result ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"saveName"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"body",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"result",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"Data is saved"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"status"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"400"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"User wasn\'t saved"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," router",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("p",null,"6) Run the server ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"npm start"),(0,s.kt)("br",{parentName:"p"}),"\n","7) Send POST-request to the ",(0,s.kt)("em",{parentName:"p"},"/users"),' route and take a look at the response "Data is saved"'),(0,s.kt)("img",{src:H.Z,alt:"repository_test"}))),(0,s.kt)("p",null,"And the last layer is ",(0,s.kt)("strong",{parentName:"p"},"middlewares"),", examples of which we have already seen in this project. Let's find out how it is configured and what it does."),(0,s.kt)("div",{className:"details"},(0,s.kt)("input",{type:"checkbox",id:"accordion-6-7"}),(0,s.kt)("label",{className:"summary",htmlFor:"accordion-6-7"},(0,s.kt)("strong",null,"Creating and testing the middlewares layer")),(0,s.kt)("div",{className:"details-body"},(0,s.kt)("p",null,"1) Create folder ",(0,s.kt)("em",{parentName:"p"},"/middlewares"),(0,s.kt)("br",{parentName:"p"}),"\n","2) Create file ",(0,s.kt)("em",{parentName:"p"},"/middlewares/auth.middleware.js"),(0,s.kt)("br",{parentName:"p"}),"\n","3) Add a function to the file and export it:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* middlewares/auth.middleware.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token function-variable function"},"isAuthorized")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=>")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"headers",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"authorization ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"===")," ",(0,s.kt)("span",{parentName:"code",className:"token string"},"'admin'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.kt)("span",{parentName:"code",className:"token function"},"next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"status"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"401"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," isAuthorized ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("strong",{parentName:"p"},"middlewares")," - perform some actions on data coming through them and then they either pass the data to the next function in a stack or they end the request-response cycle. The middleware function takes three arguments: (req, res, next). We are already familiar with the first two objects, and the third is the callback function, which informs that all current operations are complete and we can proceed to the next step.")),(0,s.kt)("p",null,"4) Import the middleware to the router and use it to secure the GET route:"),(0,s.kt)("div",{className:"gatsby-highlight","data-language":"js"},(0,s.kt)("pre",{parentName:"div",className:"language-js"},(0,s.kt)("code",{parentName:"pre",className:"language-js"},(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* routes/users.js */"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," express ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'express'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," getName ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'../services/user.service'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{")," isAuthorized ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"require"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'../middlewares/auth.middleware'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"var")," router ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," express",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"Router"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"get"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," isAuthorized",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'Welcome'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.kt)("span",{parentName:"code",className:"token comment"},"/* GET users listing. */"),"\nrouter",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"post"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},"'/'"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"function"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token parameter"},"req",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," res",(0,s.kt)("span",{parentName:"span",className:"token punctuation"},",")," next"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"const")," result ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.kt)("span",{parentName:"code",className:"token function"},"getName"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"req",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"body",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),"result",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token template-string"},(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`"),(0,s.kt)("span",{parentName:"span",className:"token string"},"Your name is "),(0,s.kt)("span",{parentName:"span",className:"token interpolation"},(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"result",(0,s.kt)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),(0,s.kt)("span",{parentName:"span",className:"token template-punctuation string"},"`")),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    res",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"status"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token number"},"400"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.kt)("span",{parentName:"code",className:"token function"},"send"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.kt)("span",{parentName:"code",className:"token string"},'"User wasn\'t sent"'),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmodule",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,s.kt)("span",{parentName:"code",className:"token operator"},"=")," router",(0,s.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  To initialize the middleware, you can use the ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"app.use")," syntax, or simply pass it as a second argument to router.")),(0,s.kt)("p",null,"5) Run the server ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"npm start"),(0,s.kt)("br",{parentName:"p"}),"\n","6) Send GET-request to the ",(0,s.kt)("em",{parentName:"p"},"/users")," route with the header ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"Authorization: user")," and take a look at response - 401 status"),(0,s.kt)("img",{src:L.Z,alt:"middleware_test1"}),(0,s.kt)("p",null,"7) Send GET-request to the ",(0,s.kt)("em",{parentName:"p"},"/users")," route with the header ",(0,s.kt)("code",{parentName:"p",className:"language-text"},"Authorization: admin")," and take a look at response - we passed the check"),(0,s.kt)("img",{src:C.Z,alt:"middleware_test2"}))),(0,s.kt)("p",null,"And that's it, we covered the basics of Node.js applications structure. Now you're a true full-stack ðŸ˜Ž"),(0,s.kt)("div",{className:"bubble small subtle"},(0,s.kt)("p",null,"  ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/uliana-lobanova/nodejs-lecture/tree/project-structure"},"Repository with the code from this block"))),(0,s.kt)("br",null),(0,s.kt)(o.aC,{id:"finish",number:"7",name:"Conclusion",difficulty:"Like cool water on a summer day - a long-awaited relief.",objectives:"Read, relax, wait half an hour and start the lecture again",mdxType:"Level"}),(0,s.kt)("p",null,"That's it, congratulations! The lecture is completely scrolled, you don't need to read anything else. Quickly go to the tabs you opened during the lecture and read more. Then give yourself a break. At least half an hour... Yes, deadlines and all that, but it will be a bit more effective if you give yourself a break to think everything through, and then go back and do your homework."),(0,s.kt)(o.aC,{id:"special",number:"8",name:"Bonus",difficulty:"As at the kitchen - everything works out if you follow the recipe.",objectives:"Deploy the Node.js application on Heroku.",mdxType:"Level"}),(0,s.kt)("p",null,"I was told that you all know how to deploy client applications, so why not learn to deploy Node.js servers?"),(0,s.kt)("div",{className:"bubble"},"Here is a ",(0,s.kt)("a",{href:"https://devcenter.heroku.com/articles/getting-started-with-nodejs?singlepage=true"},"link to the official ",(0,s.kt)("strong",null,"Heroku")," tutorial")," - take a look and try. You may also want to deploy your homework ðŸ˜‰"),(0,s.kt)(o.wO,{source:F.Z,mdxType:"ThatsAllFolks"},(0,s.kt)("b",null,"The End!")),(0,s.kt)("div",{className:"bubble"},"Leave your questions and feedback in the lecture chat at ",(0,s.kt)("a",{href:"https://academy.binary-studio.com/"},(0,s.kt)("strong",null,"Binary Studio Academy")),". Good luck and don't forget about deadlines! ðŸ˜‰"))}Z.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-lectures-express-yourself-with-nodejs-en-index-mdx-c5cd12f4890d397e4671.js.map